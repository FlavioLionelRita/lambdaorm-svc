{"mappings":[{"name":"default","entities":[{"name":"Devices","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"nullable":false,"default":"concat(type,\"-\",switch(type){case\"phone\":imei;default:mac;})","type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"enum":"DeviceType","type":"string","mapping":"type"},{"name":"name","length":32,"nullable":false,"type":"string","mapping":"name"},{"name":"groupId","length":32,"type":"string","mapping":"groupId"},{"name":"so","length":32,"type":"string","mapping":"so"},{"name":"imei","length":16,"type":"string","mapping":"imei"},{"name":"imei2","length":16,"type":"string","mapping":"imei2"},{"name":"mac","length":24,"type":"string","mapping":"mac"},{"name":"macBluetooth","length":24,"type":"string","mapping":"macBluetooth"},{"name":"ip","length":24,"type":"string","mapping":"ip"},{"name":"brand","length":32,"type":"string","mapping":"brand"},{"name":"model","length":32,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"type":"string","mapping":"serialNumber"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany"},{"name":"components","type":"manyToOne","from":"id","entity":"Components","to":"deviceId","composite":true},{"name":"journeys","type":"manyToOne","from":"id","entity":"Journeys","to":"deviceId"},{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"deviceId"}],"dependents":[{"entity":"Components","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"}},{"entity":"DeviceStatuses","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"}},{"entity":"Journeys","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"}},{"entity":"Files","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"}},{"entity":"Groups","relation":{"name":"devices","type":"manyToOne","from":"id","entity":"Devices","to":"groupId","composite":true}}],"mapping":"Devices"},{"name":"Components","primaryKey":["id"],"uniqueKey":["deviceId","name"],"properties":[{"name":"id","length":50,"nullable":false,"default":"concat(deviceId,\"-\",lower(substring(replace(name,\" \",\"-\"),0,16)))","type":"string","mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"name","length":16,"nullable":false,"type":"string","mapping":"name"},{"name":"type","length":16,"nullable":false,"enum":"ComponentType","type":"string","mapping":"type"},{"name":"brand","length":32,"type":"string","mapping":"brand"},{"name":"model","length":32,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"type":"string","mapping":"serialNumber"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"},{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"componentId"}],"dependents":[{"entity":"Devices","relation":{"name":"components","type":"manyToOne","from":"id","entity":"Components","to":"deviceId","composite":true}},{"entity":"Files","relation":{"name":"component","from":"componentId","entity":"Components","to":"id","type":"oneToMany"}}],"mapping":"Components"},{"name":"DeviceStatuses","primaryKey":["id"],"indexes":[{"name":"time","fields":["time"]}],"properties":[{"name":"id","type":"integer","nullable":false,"autoincrement":true,"mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"journeyId","type":"integer","mapping":"journeyId"},{"name":"cpu","type":"decimal","mapping":"cpu"},{"name":"cpuTemperature","type":"decimal","mapping":"cpuTemperature"},{"name":"batery","type":"decimal","mapping":"batery"},{"name":"wifiSignal","type":"decimal","mapping":"wifiSignal"},{"name":"time","type":"datetime","nullable":false,"mapping":"time"},{"name":"registred","type":"datetime","default":"now()","mapping":"registred"},{"name":"latitude","type":"decimal","mapping":"latitude"},{"name":"longitude","type":"decimal","mapping":"longitude"},{"name":"altitude","type":"decimal","mapping":"altitude"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"},{"name":"journey","from":"journeyId","entity":"Journeys","to":"id","type":"oneToMany"}],"dependents":[{"entity":"Journeys","relation":{"name":"start","from":"startId","entity":"DeviceStatuses","to":"id","type":"oneToMany"}},{"entity":"Journeys","relation":{"name":"end","from":"endId","entity":"DeviceStatuses","to":"id","type":"oneToMany"}},{"entity":"Journeys","relation":{"name":"statuses","type":"manyToOne","composite":true,"from":"id","entity":"DeviceStatuses","to":"journeyId"}}],"mapping":"DeviceStatuses"},{"name":"Journeys","primaryKey":["id"],"indexes":[{"name":"deviceId","fields":["deviceId"]}],"properties":[{"name":"id","type":"integer","nullable":false,"autoincrement":true,"mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"startId","type":"integer","mapping":"startId"},{"name":"endId","type":"integer","mapping":"endId"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"},{"name":"start","from":"startId","entity":"DeviceStatuses","to":"id","type":"oneToMany"},{"name":"end","from":"endId","entity":"DeviceStatuses","to":"id","type":"oneToMany"},{"name":"statuses","type":"manyToOne","composite":true,"from":"id","entity":"DeviceStatuses","to":"journeyId"}],"dependents":[{"entity":"Devices","relation":{"name":"journeys","type":"manyToOne","from":"id","entity":"Journeys","to":"deviceId"}},{"entity":"DeviceStatuses","relation":{"name":"journey","from":"journeyId","entity":"Journeys","to":"id","type":"oneToMany"}}],"mapping":"Journeys"},{"name":"Files","primaryKey":["id"],"properties":[{"name":"id","length":255,"nullable":false,"type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"enum":"FileType","type":"string","mapping":"type"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"componentId","length":50,"type":"string","mapping":"componentId"},{"name":"startDate","type":"datetime","nullable":false,"mapping":"startDate"},{"name":"endDate","type":"datetime","nullable":false,"mapping":"endDate"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany"},{"name":"component","from":"componentId","entity":"Components","to":"id","type":"oneToMany"}],"constraints":[{"message":"start cannot be less than end","condition":"start<=end"}],"dependents":[{"entity":"Devices","relation":{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"deviceId"}},{"entity":"Components","relation":{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"componentId"}}],"mapping":"Files"},{"name":"Users","primaryKey":["username"],"uniqueKey":["email"],"properties":[{"name":"username","length":32,"nullable":false,"type":"string","mapping":"username"},{"name":"firstname","nullable":false,"type":"string","length":80,"mapping":"firstname"},{"name":"lastname","nullable":false,"type":"string","length":80,"mapping":"lastname"},{"name":"email","nullable":false,"length":512,"writeValue":"encrypt(lower(email),\"rifk863hmKSJDJ87hd*nhJ98\")","readValue":"decrypt(email,\"rifk863hmKSJDJ87hd*nhJ98\")","type":"string","mapping":"email"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"members","type":"manyToOne","from":"username","entity":"GroupUsers","to":"username"}],"constraints":[{"message":"invalid email","condition":"test(email,\"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$\")"}],"dependents":[{"entity":"GroupUsers","relation":{"name":"user","from":"username","entity":"Users","to":"username","type":"oneToMany"}}],"mapping":"Users"},{"name":"Groups","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"default":"lower(substring(replace(name,\" \",\"-\"),0,32))","nullable":false,"type":"string","mapping":"id"},{"name":"name","length":32,"nullable":false,"type":"string","mapping":"name"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"members","type":"manyToOne","from":"id","entity":"GroupUsers","to":"groupId","composite":true},{"name":"devices","type":"manyToOne","from":"id","entity":"Devices","to":"groupId","composite":true}],"dependents":[{"entity":"Devices","relation":{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany"}},{"entity":"GroupUsers","relation":{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany"}}],"mapping":"Groups"},{"name":"GroupUsers","primaryKey":["id"],"uniqueKey":["groupId","username"],"properties":[{"name":"id","default":"`${groupId}-${username}`","length":64,"nullable":false,"type":"string","mapping":"id"},{"name":"username","length":32,"nullable":false,"type":"string","mapping":"username"},{"name":"groupId","length":32,"nullable":false,"type":"string","mapping":"groupId"},{"name":"role","length":32,"nullable":false,"enum":"Role","type":"string","mapping":"role"}],"relations":[{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany"},{"name":"user","from":"username","entity":"Users","to":"username","type":"oneToMany"}],"dependents":[{"entity":"Users","relation":{"name":"members","type":"manyToOne","from":"username","entity":"GroupUsers","to":"username"}},{"entity":"Groups","relation":{"name":"members","type":"manyToOne","from":"id","entity":"GroupUsers","to":"groupId","composite":true}}],"mapping":"GroupUsers"}]}],"mappingData":{},"pendingData":[]}